webpackJsonp([0],{"+lF4":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,".container[data-v-2a183b29]{display:grid;height:100%;width:100%;cursor:none;overflow:hidden}.container .auth__container[data-v-2a183b29]{position:absolute;display:grid;height:100%;width:100%;background-color:rgba(0,0,0,.3)}.container .auth__container .github-login[data-v-2a183b29]{justify-self:center;-ms-flex-item-align:center;align-self:center;cursor:pointer;width:60px;height:60px}.container .input__container[data-v-2a183b29]{position:absolute;display:grid;width:100%;height:100%;overflow:hidden}.container .input__container .input[data-v-2a183b29]{display:inline-block;width:300px;height:50px;justify-self:center;-ms-flex-item-align:center;align-self:center;border-radius:4px;-webkit-animation:popdown-data-v-2a183b29 .25s cubic-bezier(.215,.61,.355,1) both;animation:popdown-data-v-2a183b29 .25s cubic-bezier(.215,.61,.355,1) both}.container .input__container .input[data-v-2a183b29]:focus{-webkit-animation:popup-data-v-2a183b29 .2s cubic-bezier(.175,.885,.32,1.275) both;animation:popup-data-v-2a183b29 .2s cubic-bezier(.175,.885,.32,1.275) both}.container .anounce[data-v-2a183b29]{position:absolute;text-align:center;width:100%}@-webkit-keyframes popup-data-v-2a183b29{0%{-webkit-transform:scale(0);transform:scale(0)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes popup-data-v-2a183b29{0%{-webkit-transform:scale(0);transform:scale(0)}to{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes popdown-data-v-2a183b29{0%{-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:scale(0);transform:scale(0)}}@keyframes popdown-data-v-2a183b29{0%{-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:scale(0);transform:scale(0)}}canvas[data-v-2a183b29],video[data-v-2a183b29]{display:none}",""])},"//H/":function(e,t,a){var s=a("+lF4");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("rjj0")("301eeaa1",s,!1,{sourceMap:!1})},"/TYz":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("fadZ"),r=a("rGQh"),n=!1;var i=function(e){n||a("//H/")},o=a("VU/8")(s.a,r.a,!1,i,"data-v-2a183b29",null);o.options.__file="pages/index.vue",t.default=o.exports},Lmvk:function(e,t,a){"use strict";t.a={props:["message","x","y","avatar","name","face","isFace"],data:function(){return{width:100}},watch:{message:function(e){var t=this;this.$refs.message&&this.$refs.message.classList.add("new"),setTimeout(function(){return t.$refs.message.classList.remove("new")},150)}}}},fadZ:function(e,t,a){"use strict";var s=a("Xxa5"),r=a.n(s),n=a("exGp"),i=a.n(n),o=a("Dd8w"),c=a.n(o),u=a("dBEL"),l=a("m5jp"),p=new window.FaceDetector({fastMode:!0});t.a={data:function(){return{user:null,uid:null,me:null,inputText:"",isInputFocus:!1,isFace:!1,timer:null}},firebase:function(){return{users:u.a.ref("users")}},created:function(){var e=this;u.b.auth().onAuthStateChanged(function(t){t&&(console.log(t),e.user=t,e.uid=t.uid,e.me=c()({},e.me,{avatar:t.photoURL,name:t.displayName||t.email.substring(0,t.email.lastIndexOf("@")),x:100,y:100}),u.a.ref("users/"+e.uid).set(e.me))}),window.addEventListener("beforeunload",function(t){u.a.ref("users/"+e.uid).set({})}),window.addEventListener("keypress",function(t){if(13===t.keyCode&&e.me)if(e.isInputFocus){if(e.isInputFocus=!1,t.target.blur(),""===e.inputText)return;e.me=c()({},e.me,{message:e.inputText}),u.a.ref("users/"+e.uid+"/message").set(e.inputText),e.inputText=""}else e.inputText="",e.$refs.input.focus(),e.isInputFocus=!0}),window.addEventListener("keypress",function(){var t=i()(r.a.mark(function t(a){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(116===a.keyCode||12613===a.keyCode){t.next=2;break}return t.abrupt("return");case 2:e.isFace?(e.isFace=!1,e.me=c()({},e.me,{isFace:e.isFace}),u.a.ref("users/"+e.uid).set(e.me),clearInterval(e.timer)):(e.cameraOn(),e.isFace=!0,e.timer=setInterval(i()(r.a.mark(function t(){var a,s,n,i,o,l,d,f;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.detect(e.$refs.video);case 2:if((a=t.sent)[0]){t.next=5;break}return t.abrupt("return");case 5:s=a[0].boundingBox,n=s.x,i=s.y,o=s.width,l=s.height,d=o/3,e.$refs.canvas.getContext("2d").drawImage(e.$refs.video,n-d,i-d,o+2*d,l+2*d,0,0,100,100),f=e.$refs.canvas.toDataURL("image/jpeg",.5),e.me=c()({},e.me,{face:f,isFace:e.isFace}),u.a.ref("users/"+e.uid).set(e.me);case 11:case"end":return t.stop()}},t,e)})),100));case 3:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}())},methods:{mousemove:function(e){(this.user||this.uid)&&(this.me=c()({},this.me,{x:e.pageX,y:e.pageY}),u.a.ref("users/"+this.uid).set(this.me))},clickOutside:function(e){this.isInputFocus=!1,e.target.blur()},login:function(){var e=i()(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.b.auth().signInWithPopup(new u.b.auth.GithubAuthProvider);case 2:t=e.sent,this.user=t.user,this.uid=t.user.uid,this.me=c()({},this.me,{avatar:t.user.photoURL,name:t.user.displayName||t.user.email.substring(0,t.user.email.lastIndexOf("@")),x:0,y:0}),u.a.ref("users/"+this.uid).set(this.me);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),cameraOn:function(){var e=i()(r.a.mark(function e(){var t,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:!0});case 2:t=e.sent,(a=this.$refs.video).onloadedmetadata=function(e){return a.play()},a.srcObject=t;case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},computed:{userList:function(){return this.users.map(function(e){var t=c()({},e);return delete t[".key"],t})}},components:{User:l.a}}},lkMQ:function(e,t,a){var s=a("mb2O");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("rjj0")("753986aa",s,!1,{sourceMap:!1})},m5jp:function(e,t,a){"use strict";var s=a("Lmvk"),r=a("qiLL"),n=!1;var i=function(e){n||a("lkMQ")},o=a("VU/8")(s.a,r.a,!1,i,"data-v-7459b026",null);o.options.__file="components/User.vue",t.a=o.exports},mb2O:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,".user[data-v-7459b026]{display:grid}.user__message[data-v-7459b026]{position:absolute;display:inline-block;-webkit-transform-origin:bottom center;transform-origin:bottom center;-webkit-transform:translateX(-50%) translateY(calc(-100% - 58px));transform:translateX(-50%) translateY(calc(-100% - 58px));background-color:#ddd;border-radius:8px;padding:4px 8px;max-width:150px}.user__message.new[data-v-7459b026]{-webkit-animation:popup-data-v-7459b026 .15s cubic-bezier(.175,.885,.32,1.275);animation:popup-data-v-7459b026 .15s cubic-bezier(.175,.885,.32,1.275)}.user__avatar[data-v-7459b026]{position:absolute;cursor:none;border-radius:100%}.user__name[data-v-7459b026]{position:absolute;-webkit-transform:translateX(-50%) translateY(55px);transform:translateX(-50%) translateY(55px)}@-webkit-keyframes popup-data-v-7459b026{0%{-webkit-transform:scale(0) translateX(-50%) translateY(calc(-100% - 58px));transform:scale(0) translateX(-50%) translateY(calc(-100% - 58px))}to{-webkit-transform:scale(1) translateX(-50%) translateY(calc(-100% - 58px));transform:scale(1) translateX(-50%) translateY(calc(-100% - 58px))}}@keyframes popup-data-v-7459b026{0%{-webkit-transform:scale(0) translateX(-50%) translateY(calc(-100% - 58px));transform:scale(0) translateX(-50%) translateY(calc(-100% - 58px))}to{-webkit-transform:scale(1) translateX(-50%) translateY(calc(-100% - 58px));transform:scale(1) translateX(-50%) translateY(calc(-100% - 58px))}}",""])},qiLL:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user"},[e.message?a("div",{ref:"message",staticClass:"user__message",style:{left:e.x+"px",top:e.y+"px"}},[e._v("\n    "+e._s(e.message)+"\n  ")]):e._e(),a("img",{staticClass:"user__avatar",style:{left:e.x-e.width/2+"px",top:e.y-e.width/2+"px"},attrs:{src:e.isFace?e.face:e.avatar,width:e.width}}),a("div",{staticClass:"user__name",style:{left:e.x+"px",top:e.y+"px"}},[e._v("\n    "+e._s(e.name)+"\n  ")])])};s._withStripped=!0;var r={render:s,staticRenderFns:[]};t.a=r},rGQh:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",style:!e.me&&{cursor:"default"},on:{mousemove:e.mousemove,click:e.clickOutside}},[e._l(e.userList,function(t){return e.me&&e.me.avatar===t.avatar?e._e():a("User",e._b({key:t.avatar},"User",t,!1))}),e.me?a("User",e._b({},"User",e.me,!1)):e._e(),a("div",{staticClass:"input__container"},[a("a-input",{ref:"input",staticClass:"input",attrs:{size:"large",placeholder:"Say Something!"},model:{value:e.inputText,callback:function(t){e.inputText=t},expression:"inputText"}})],1),e.user?e._e():a("div",{staticClass:"auth__container"},[a("img",{staticClass:"github-login",attrs:{src:"/github-icon.svg"},on:{click:e.login}})]),a("div",{staticClass:"anounce",domProps:{innerHTML:e._s(e.me?"<b>Enter</b> - Chat, <b>T</b> - Toggle Avatar":"GitHub로 로그인하세요")}}),a("video",{ref:"video",attrs:{width:"480",height:"360"}}),a("canvas",{ref:"canvas",attrs:{width:"100",height:"100"}})],2)};s._withStripped=!0;var r={render:s,staticRenderFns:[]};t.a=r}});